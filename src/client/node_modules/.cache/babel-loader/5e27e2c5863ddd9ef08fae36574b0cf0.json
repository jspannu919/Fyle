{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/Users/jaideeppannu/Desktop/learning/fyle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/jaideeppannu/Desktop/learning/fyle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./App.css\";import Table from\"./components/Table\";import{debounce}from\"./utils/AppUtils\";import{Input,Select}from\"antd\";import{SearchOutlined,LoadingOutlined}from\"@ant-design/icons\";import{useState,useEffect}from\"react\";import axios from\"axios\";var Option=Select.Option;function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),branches=_useState2[0],setBranches=_useState2[1];var _useState3=useState(\"Any\"),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];var _useState5=useState(\"Any\"),_useState6=_slicedToArray(_useState5,2),city=_useState6[0],setCity=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchText=_useState8[0],setSearchText=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var filteredData=[];useEffect(function(){axios.get(\"/api/branches?limit=2000\").then(function(_ref){var data=_ref.data;setBranches(data);setLoading(false);});},[]);//filter data IIFE\n(function filter(){//filter as per state\nif(state!==\"Any\"){if(city!==\"Any\"){filteredData=branches.filter(function(branch){return branch.state===state&&branch.city===city;});}else{filteredData=branches.filter(function(branch){return branch.state===state;});}}else filteredData=branches;//filter as per search\nif(searchText.length){filteredData=filteredData.filter(function(branch){var shouldInclude=false;Object.keys(branch).forEach(function(key){if(key===\"favourite\"){}else if(key===\"bank_id\")shouldInclude|=branch[key]===Number(searchText);else shouldInclude|=branch[key].includes(searchText);});return shouldInclude;});}})();//fetch cities as per state selected\nfunction getCities(){if(state!==\"Any\"){var cities=new Set();branches.forEach(function(branch){if(branch.state===state)cities.add(branch.city);});return _toConsumableArray(cities).sort().map(function(city){return/*#__PURE__*/_jsx(Option,{value:city,children:city},city);});}else return[];}//get states from data\nfunction getStates(){var states=new Set();branches.forEach(function(branch){return states.add(branch.state);});return _toConsumableArray(states).sort().map(function(state){return/*#__PURE__*/_jsx(Option,{value:state,children:state},state);});}//when user changes state\nfunction stateChangeHandler(newState){setState(newState);setCity(\"Any\");}//when user types in search bar\nfunction searchHandler(e){var text=e.target.value;if(Number.isNaN(Number(text)))setSearchText(text.toUpperCase());else setSearchText(text);}return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:loading?/*#__PURE__*/_jsx(LoadingOutlined,{className:\"loadingIcon\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Branches\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"citySearch\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"state\",children:\"State: \"}),/*#__PURE__*/_jsxs(Select,{value:state,className:\"stateSearchBar\",onChange:stateChangeHandler,children:[/*#__PURE__*/_jsx(Option,{value:\"Any\",children:\"Any\"},\"any\"),getStates()]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"city\",children:\"City: \"}),/*#__PURE__*/_jsxs(Select,{value:city,className:\"citySearchBar\",onChange:setCity,disabled:state===\"Any\",children:[/*#__PURE__*/_jsx(Option,{value:\"Any\",children:\"Any\"},\"any\"),getCities()]})]}),/*#__PURE__*/_jsx(Input,{size:\"large\",placeholder:\"Search\",className:\"searchBar\",onChange:debounce(searchHandler),prefix:/*#__PURE__*/_jsx(SearchOutlined,{})})]}),/*#__PURE__*/_jsx(Table,{branches:filteredData})]})});}export default App;","map":{"version":3,"sources":["/Users/jaideeppannu/Desktop/learning/fyle/src/client/src/App.jsx"],"names":["Table","debounce","Input","Select","SearchOutlined","LoadingOutlined","useState","useEffect","axios","Option","App","branches","setBranches","state","setState","city","setCity","searchText","setSearchText","loading","setLoading","filteredData","get","then","data","filter","branch","length","shouldInclude","Object","keys","forEach","key","Number","includes","getCities","cities","Set","add","sort","map","getStates","states","stateChangeHandler","newState","searchHandler","e","text","target","value","isNaN","toUpperCase"],"mappings":"qdAAA,MAAO,WAAP,CACA,MAAOA,CAAAA,KAAP,KAAkB,oBAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,MAA9B,CACA,OAASC,cAAT,CAAyBC,eAAzB,KAAgD,mBAAhD,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GAEQC,CAAAA,M,CAAWN,M,CAAXM,M,CAER,QAASC,CAAAA,GAAT,EAAe,eACmBJ,QAAQ,CAAC,EAAD,CAD3B,wCACNK,QADM,eACIC,WADJ,8BAEaN,QAAQ,CAAC,KAAD,CAFrB,yCAENO,KAFM,eAECC,QAFD,8BAGWR,QAAQ,CAAC,KAAD,CAHnB,yCAGNS,IAHM,eAGAC,OAHA,8BAIuBV,QAAQ,CAAC,EAAD,CAJ/B,yCAINW,UAJM,eAIMC,aAJN,8BAKiBZ,QAAQ,CAAC,IAAD,CALzB,0CAKNa,OALM,gBAKGC,UALH,gBAMb,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CAEAd,SAAS,CAAC,UAAM,CACdC,KAAK,CAACc,GAAN,CAAU,0BAAV,EAAsCC,IAAtC,CAA2C,cAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CACvDZ,WAAW,CAACY,IAAD,CAAX,CACAJ,UAAU,CAAC,KAAD,CAAV,CACD,CAHD,EAID,CALQ,CAKN,EALM,CAAT,CAOA;AACA,CAAC,QAASK,CAAAA,MAAT,EAAkB,CACjB;AACA,GAAIZ,KAAK,GAAK,KAAd,CAAqB,CACnB,GAAIE,IAAI,GAAK,KAAb,CAAoB,CAClBM,YAAY,CAAGV,QAAQ,CAACc,MAAT,CACb,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAACb,KAAP,GAAiBA,KAAjB,EAA0Ba,MAAM,CAACX,IAAP,GAAgBA,IAAtD,EADa,CAAf,CAGD,CAJD,IAIO,CACLM,YAAY,CAAGV,QAAQ,CAACc,MAAT,CAAgB,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAACb,KAAP,GAAiBA,KAA7B,EAAhB,CAAf,CACD,CACF,CARD,IAQOQ,CAAAA,YAAY,CAAGV,QAAf,CAEP;AACA,GAAIM,UAAU,CAACU,MAAf,CAAuB,CACrBN,YAAY,CAAGA,YAAY,CAACI,MAAb,CAAoB,SAACC,MAAD,CAAY,CAC7C,GAAIE,CAAAA,aAAa,CAAG,KAApB,CACAC,MAAM,CAACC,IAAP,CAAYJ,MAAZ,EAAoBK,OAApB,CAA4B,SAACC,GAAD,CAAS,CACnC,GAAIA,GAAG,GAAK,WAAZ,CAAyB,CACxB,CADD,IACO,IAAIA,GAAG,GAAK,SAAZ,CACLJ,aAAa,EAAIF,MAAM,CAACM,GAAD,CAAN,GAAgBC,MAAM,CAAChB,UAAD,CAAvC,CADK,IAEFW,CAAAA,aAAa,EAAIF,MAAM,CAACM,GAAD,CAAN,CAAYE,QAAZ,CAAqBjB,UAArB,CAAjB,CACN,CALD,EAMA,MAAOW,CAAAA,aAAP,CACD,CATc,CAAf,CAUD,CACF,CAzBD,IA2BA;AACA,QAASO,CAAAA,SAAT,EAAqB,CACnB,GAAItB,KAAK,GAAK,KAAd,CAAqB,CACnB,GAAIuB,CAAAA,MAAM,CAAG,GAAIC,CAAAA,GAAJ,EAAb,CACA1B,QAAQ,CAACoB,OAAT,CAAiB,SAACL,MAAD,CAAY,CAC3B,GAAIA,MAAM,CAACb,KAAP,GAAiBA,KAArB,CAA4BuB,MAAM,CAACE,GAAP,CAAWZ,MAAM,CAACX,IAAlB,EAC7B,CAFD,EAGA,MAAO,oBAAIqB,MAAJ,EAAYG,IAAZ,GAAmBC,GAAnB,CAAuB,SAACzB,IAAD,qBAC5B,KAAC,MAAD,EAAmB,KAAK,CAAEA,IAA1B,UACGA,IADH,EAAaA,IAAb,CAD4B,EAAvB,CAAP,CAKD,CAVD,IAUO,OAAO,EAAP,CACR,CAED;AACA,QAAS0B,CAAAA,SAAT,EAAqB,CACnB,GAAIC,CAAAA,MAAM,CAAG,GAAIL,CAAAA,GAAJ,EAAb,CACA1B,QAAQ,CAACoB,OAAT,CAAiB,SAACL,MAAD,QAAYgB,CAAAA,MAAM,CAACJ,GAAP,CAAWZ,MAAM,CAACb,KAAlB,CAAZ,EAAjB,EACA,MAAO,oBAAI6B,MAAJ,EAAYH,IAAZ,GAAmBC,GAAnB,CAAuB,SAAC3B,KAAD,qBAC5B,KAAC,MAAD,EAAoB,KAAK,CAAEA,KAA3B,UACGA,KADH,EAAaA,KAAb,CAD4B,EAAvB,CAAP,CAKD,CAED;AACA,QAAS8B,CAAAA,kBAAT,CAA4BC,QAA5B,CAAsC,CACpC9B,QAAQ,CAAC8B,QAAD,CAAR,CACA5B,OAAO,CAAC,KAAD,CAAP,CACD,CAED;AACA,QAAS6B,CAAAA,aAAT,CAAuBC,CAAvB,CAA0B,CACxB,GAAIC,CAAAA,IAAI,CAAGD,CAAC,CAACE,MAAF,CAASC,KAApB,CACA,GAAIhB,MAAM,CAACiB,KAAP,CAAajB,MAAM,CAACc,IAAD,CAAnB,CAAJ,CAAgC7B,aAAa,CAAC6B,IAAI,CAACI,WAAL,EAAD,CAAb,CAAhC,IACKjC,CAAAA,aAAa,CAAC6B,IAAD,CAAb,CACN,CAED,mBACE,YAAK,SAAS,CAAC,KAAf,UACG5B,OAAO,cACN,KAAC,eAAD,EAAiB,SAAS,CAAC,aAA3B,EADM,cAGN,wCACE,gCADF,cAEE,aAAK,SAAS,CAAC,iBAAf,wBACE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,OAAf,qBADF,cAEE,MAAC,MAAD,EACE,KAAK,CAAEN,KADT,CAEE,SAAS,CAAC,gBAFZ,CAGE,QAAQ,CAAE8B,kBAHZ,wBAKE,KAAC,MAAD,EAAQ,KAAK,CAAC,KAAd,iBAAwB,KAAxB,CALF,CAQGF,SAAS,EARZ,GAFF,cAaE,cAAO,OAAO,CAAC,MAAf,oBAbF,cAcE,MAAC,MAAD,EACE,KAAK,CAAE1B,IADT,CAEE,SAAS,CAAC,eAFZ,CAGE,QAAQ,CAAEC,OAHZ,CAIE,QAAQ,CAAEH,KAAK,GAAK,KAJtB,wBAME,KAAC,MAAD,EAAQ,KAAK,CAAC,KAAd,iBAAwB,KAAxB,CANF,CASGsB,SAAS,EATZ,GAdF,GADF,cA2BE,KAAC,KAAD,EACE,IAAI,CAAC,OADP,CAEE,WAAW,CAAC,QAFd,CAGE,SAAS,CAAC,WAHZ,CAIE,QAAQ,CAAElC,QAAQ,CAAC4C,aAAD,CAJpB,CAKE,MAAM,cAAE,KAAC,cAAD,IALV,EA3BF,GAFF,cAqCE,KAAC,KAAD,EAAO,QAAQ,CAAExB,YAAjB,EArCF,GAJJ,EADF,CA+CD,CAED,cAAeX,CAAAA,GAAf","sourcesContent":["import \"./App.css\";\nimport Table from \"./components/Table\";\nimport { debounce } from \"./utils/AppUtils\";\nimport { Input, Select } from \"antd\";\nimport { SearchOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst { Option } = Select;\n\nfunction App() {\n  const [branches, setBranches] = useState([]);\n  const [state, setState] = useState(\"Any\");\n  const [city, setCity] = useState(\"Any\");\n  const [searchText, setSearchText] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  let filteredData = [];\n\n  useEffect(() => {\n    axios.get(\"/api/branches?limit=2000\").then(({ data }) => {\n      setBranches(data);\n      setLoading(false);\n    });\n  }, []);\n\n  //filter data IIFE\n  (function filter() {\n    //filter as per state\n    if (state !== \"Any\") {\n      if (city !== \"Any\") {\n        filteredData = branches.filter(\n          (branch) => branch.state === state && branch.city === city\n        );\n      } else {\n        filteredData = branches.filter((branch) => branch.state === state);\n      }\n    } else filteredData = branches;\n\n    //filter as per search\n    if (searchText.length) {\n      filteredData = filteredData.filter((branch) => {\n        let shouldInclude = false;\n        Object.keys(branch).forEach((key) => {\n          if (key === \"favourite\") {\n          } else if (key === \"bank_id\")\n            shouldInclude |= branch[key] === Number(searchText);\n          else shouldInclude |= branch[key].includes(searchText);\n        });\n        return shouldInclude;\n      });\n    }\n  })();\n\n  //fetch cities as per state selected\n  function getCities() {\n    if (state !== \"Any\") {\n      let cities = new Set();\n      branches.forEach((branch) => {\n        if (branch.state === state) cities.add(branch.city);\n      });\n      return [...cities].sort().map((city) => (\n        <Option key={city} value={city}>\n          {city}\n        </Option>\n      ));\n    } else return [];\n  }\n\n  //get states from data\n  function getStates() {\n    let states = new Set();\n    branches.forEach((branch) => states.add(branch.state));\n    return [...states].sort().map((state) => (\n      <Option key={state} value={state}>\n        {state}\n      </Option>\n    ));\n  }\n\n  //when user changes state\n  function stateChangeHandler(newState) {\n    setState(newState);\n    setCity(\"Any\");\n  }\n\n  //when user types in search bar\n  function searchHandler(e) {\n    let text = e.target.value;\n    if (Number.isNaN(Number(text))) setSearchText(text.toUpperCase());\n    else setSearchText(text);\n  }\n\n  return (\n    <div className=\"app\">\n      {loading ? (\n        <LoadingOutlined className=\"loadingIcon\" />\n      ) : (\n        <>\n          <h1>Branches</h1>\n          <div className=\"searchContainer\">\n            <div className=\"citySearch\">\n              <label htmlFor=\"state\">State: </label>\n              <Select\n                value={state}\n                className=\"stateSearchBar\"\n                onChange={stateChangeHandler}\n              >\n                <Option value=\"Any\" key=\"any\">\n                  Any\n                </Option>\n                {getStates()}\n              </Select>\n\n              <label htmlFor=\"city\">City: </label>\n              <Select\n                value={city}\n                className=\"citySearchBar\"\n                onChange={setCity}\n                disabled={state === \"Any\"}\n              >\n                <Option value=\"Any\" key=\"any\">\n                  Any\n                </Option>\n                {getCities()}\n              </Select>\n            </div>\n            <Input\n              size=\"large\"\n              placeholder=\"Search\"\n              className=\"searchBar\"\n              onChange={debounce(searchHandler)}\n              prefix={<SearchOutlined />}\n            />\n          </div>\n          <Table branches={filteredData} />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}